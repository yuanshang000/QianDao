!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}var t=setTimeout;function o(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],c(e,this)}function r(o,r){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,i._immediateFn(function(){var e=1===o._state?r.onFulfilled:r.onRejected;if(null!==e){var t;try{t=e(o._value)}catch(n){return void s(r.promise,n)}a(r.promise,t)}else(1===o._state?a:s)(r.promise,o._value)})):o._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void c(function o(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(r){s(e,r)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(o){if(n)return;n=!0,s(t,o)}}i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return r(this,new u(e,t,n)),n},i.prototype["finally"]=e,i.all=function(t){return new i(function(r,i){if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(t);if(0===a.length)return r([]);var s=a.length;function l(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){l(t,e)},i)}a[t]=e,0==--s&&r(a)}catch(o){i(o)}}for(var e=0;e<a.length;e++)l(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(r){return new i(function(e,t){for(var n=0,o=r.length;n<o;n++)r[n].then(e,t)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in n?n.Promise.prototype["finally"]||(n.Promise.prototype["finally"]=e):n.Promise=i}),function(o,a){var r="MINIJQ";if(!(o[r]&&"1.0"<=o[r].version)){o._$;var s=o.document,p=o[r]=o._$=function(e,t){return e?("string"==typeof e&&(e=function i(e,t,n){var o=l.exec(e,t||s);if(n!==a)if(o){var r=p.util.isArray(o);if(1===n&&r)return o[0];if(0===n&&!r)return[o]}else if(0===n)return[];return o}(e,t)),function n(e){if(e&&!e[r])if(e.nodeType){if("unknown"!=typeof e.getAttribute)for(var t in p.element)a===e[t]&&(e[t]=p.element[t])}else e=p.util.extend(p.util.toArray(e),p.element);return e}(e)):e};o.NTESCommonNavigator=o.NTESCommonNavigator?o.NTESCommonNavigator:{},p.version="1.0";var e=s.createElement("div");e.innerHTML="<p class='TEST'></p>";var l={SPACE:/\s*([\s>~+,])\s*/g,ISSIMPLE:/^#?[\w\u00c0-\uFFFF_-]+_$/,IMPLIEDALL:/([>\s~\+,]|^)([#\.\[:])/g,ATTRVALUES:/=(["'])([^'"]*)\1]/g,ATTR:/\[\s*([\w\u00c0-\uFFFF_-]+)\s*(?:(\S?\=)\s*(.*?))?\s*\]/g,PSEUDOSEQ:/\(([^\(\)]*)\)_$/g,BEGINIDAPART:/^(?:\*#([\w\u00c0-\uFFFF_-]+))/,STANDARD:/^[>\s~\+:]/,STREAM:/[#\.>\s\[\]:~\+]+|[^#\.>\s\[\]:~\+]+/g,ISINT:/^\d+_$/,enableQuerySelector:e.querySelectorAll&&0<e.querySelectorAll(".TEST").length,tempAttrValues:[],tempAttrs:[],idName:r+"UniqueId",id:0,exec:function(e,t){var n,o,r,i,a,s,l,u,c,f,m=this;if(""!==(e=e.trim())){if(m.ISSIMPLE.test(e)){if(0===e.indexOf("#")&&"undefined"!=typeof t.getElementById)return m.getElemById(t,e.substr(1));if("undefined"!=typeof t.getElementsByTagName)return p.util.toArray(t.getElementsByTagName(e))}if(m.enableQuerySelector&&t.nodeType)try{return p.util.toArray(t.querySelectorAll(e))}catch(d){}for(t=t.nodeType?[t]:p.util.toArray(t),r=(o=e.replace(m.SPACE,"_$1").replace(m.ATTRVALUES,m.analyzeAttrValues).replace(m.ATTR,m.analyzeAttrs).replace(m.IMPLIEDALL,"_$1*_$2").split(",")).length,i=-1,n=[];++i<r;){if(s=t,e=o[i],m.BEGINIDAPART.test(e))if("undefined"!=typeof t[0].getElementById){if(!(s=[m.getElemById(t[0],RegExp._$1)])[0])continue;e=RegExp.rightContext}else e=o[i];if(""!==e)for(m.STANDARD.test(e)||(e=" "+e),u=(l=e.match(m.STREAM)||[]).length,a=0;a<u&&(c=l[a++],f=l[a++],0!==(s=m.operators[c]?m.operators[c](s,f):[]).length););p.util.merge(n,s)}return m.tempAttrValues.length=m.tempAttrs.length=0,1<n.length?m.unique(n):n}},analyzeAttrs:function(e,t,n,o){return"[]"+(l.tempAttrs.push([t,n,o])-1)},analyzeAttrValues:function(e,t,n){return"="+(l.tempAttrValues.push(n)-1)+"]"},generateId:function(e){var t,n=this.idName;try{t=e[n]=e[n]||new Number(++this.id)}catch(o){(t=e.getAttribute(n))||(t=new Number(++this.id),e.setAttribute(n,t))}return t.valueOf()},unique:function(e){for(var t,n,o=[],r=0,i={};t=e[r++];)1===t.nodeType&&(i[n=this.generateId(t)]||(i[n]=!0,o.push(t)));return o},attrMap:{"class":"className","for":"htmlFor"},getElemById:function(e,t){var n=e.getElementById(t);if(!n||n.id===t||!e.all)return n;if(n=e.all[t]){n.nodeType&&(n=[n]);for(var o=0;o<n.length;o++)if(this.getAttribute(n[o],"id")===t)return n[o]}},getElemsByTagName:function(e,t,n,o,r){var i,a,s,l=[],u=-1,c=e.length;for("*"!==o&&(s=o.toUpperCase());++u<c;)for(i=e[u][t],a=0;i&&(!r||a<r);)1===i.nodeType&&((i.nodeName.toUpperCase()===s||!s)&&l.push(i),a++),i=i[n];return l},operators:{"#":function(e,t){return l.getElemsByAttribute(e,["id","=",t])},".":function(e,t){return l.getElemsByAttribute(e,["class","~=",t])},">":function(e,t){return l.getElemsByTagName(e,"firstChild","nextSibling",t)}}};p.element={get:function(e){return this.nodeType===a?this[e]:0==e?this:a},_$:function(e){return p("number"==typeof e?this.get(e):e,this)},hasClass:function(e){return p.style.hasClass(this,e)},addClass:function(e){return p.style.addClass(this,e)},removeClass:function(e){return p.style.removeClass(this,e)},addEvent:function(e,t,n){return p.event.addEvent(this,e,t,n)},removeEvent:function(e,t){return p.event.removeEvent(this,e,t)},each:function(e){return p.dom.eachNode(this,e)},show:function(){this&&this[0]&&(this[0].style.display="block")},hide:function(){this&&this[0]&&(this[0].style.display="none")}},p.element[r]=p.element._$,o.addEvent=s.addEvent=p.element.addEvent,o.removeEvent=s.removeEvent=p.element.removeEvent;var i=Array.prototype.slice,t=Object.prototype.toString;p.util={isArray:function(e){return"[object Array]"===t.call(e)},isFunction:function(e){return"[object Function]"===t.call(e)},toArray:function(e){if(p.util.isArray(e))return e;var t;try{t=i.call(e)}catch(o){t=[];for(var n=e.length;n;)t[--n]=e[n]}return t},merge:function(e,t){for(var n=t.length,o=e.length;0<=--n;)e[o+n]=t[n];return e},extend:function(e,t){for(var n in t)e[n]=t[n];return e},each:function(e,t,n){var o=-1,r=e.length,i=r===a||p.util.isFunction(e);if(n)if(i){for(o in e)if(!1===t.apply(e[o],n))break}else for(;++o<r&&!1!==t.apply(e[o],n););else if(i){for(o in e)if(!1===t.call(e[o],o,e[o]))break}else for(;++o<r&&!1!==t.call(e[o],o,e[o]););return e}};var u,n,c=[];s.addEventListener?n=function(){s.removeEventListener("DOMContentLoaded",n,!1),N()}:s.attachEvent&&(n=function(){"complete"===s.readyState&&(s.detachEvent("onreadystatechange",n),N())}),p.dom={wrapByArray:function(e){if(e){if(e.nodeType!==a||e.setInterval)return[e];if(e.length)return p.util.toArray(e)}return[]},eachNode:function(e,t,n){return p.util.each(p.dom.wrapByArray(e),t,n),e},ready:function(e){if(!u){if("complete"===s.readyState)return N();if(s.addEventListener)s.addEventListener("DOMContentLoaded",N,!1),o.addEventListener("load",N,!1);else if(s.attachEvent){var t;s.attachEvent("onreadystatechange",N),o.attachEvent("onload",N);try{t=null==o.frameElement}catch(n){}s.documentElement.doScroll&&t&&w()}return u=!0,p.dom.isReady?e.call(s,p):c.push(e),this}}},p.ready=p.dom.ready;var f=/\s*([:;])\s*/g,m=/[^:;]+?(?=:)/g,d=/[^:;]+/g,v=/[^\s]+/g,g=/-([a-z])/gi,h=e.style.styleFloat!==a?"styleFloat":"cssFloat",y=/^float_$/i;p.style={fixStyleName:function(e){return y.test(e)?h:e.replace(g,function(e,t){return t.toUpperCase()})},hasClass:function(e,t){var n=(e=p.dom.wrapByArray(e)).length;if(0<n)for(t=" "+t+" ";0<=--n;)if(0<=(" "+e[n].className+" ").indexOf(t))return!0;return!1},parse:function(e){if("string"!=typeof e)return e;var t,n=0<=e.indexOf(";"),o=0<=e.indexOf(":");if(n||o){t={};var r=(e=e.trim().replace(f,"_$1").replace(o?m:d,p.style.fixStyleName).match(d)).length,i=0;if(o){if(r%2!=0)throw"invalid inline style";for(;i<r;)t[e[i++]]=e[i++]}else for(;i<r;)t[e[i++]]=""}else t=e.match(v)||[];return t},addClass:function(e,t){if(e){var n=p.style.parse(t);return p.util.isArray(n)?p.dom.eachNode(e,C,[n,n.length,t]):p.dom.eachNode(e,A,[n,t]),e}},removeClass:function(e,t){var n=p.style.parse(t);return p.util.isArray(n)?p.dom.eachNode(e,S,[n,n.length,t]):p.dom.eachNode(e,A,[n,t]),e}};var _=/\s*,\s*/,T=0;p.event={idName:r+"EventId",eventSpace:r+"Events",addEvent:function(e,t,n,o){for(var r=(t=t.split(_)).length;0<=--r;)p.dom.eachNode(e,b,[t[r],n,o]);return e},removeEvent:function(e,t,n){for(var o=(t=t.split(_)).length;0<=--o;)p.dom.eachNode(e,L,[t[o],n]);return e},delegate:function(n,e,o,r){var i=p.event,t=n[i.eventSpace]=n[i.eventSpace]||{},a=o[i.idName]=o[i.idName]||++T;t[e]=t[e]||{};var s=t[e][a];return s||(s=function(e){e=i.fix(e);var t=o.call(n,e,r);return!1===t&&e.preventDefault(),t},t[e][a]=s),s},getDelegate:function(e,t,n){var o=p.event;try{return e[o.eventSpace][t][n[o.idName]]}catch(r){}return n},fix:function(e){if(!e.target&&(e.target=e.srcElement||s),3==e.target.nodeType&&(e.target=e.target.parentNode),null==e.timeStamp&&(e.timeStamp=Date.now()),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},a===e.pageX&&a!==e.clientX){var t=s.documentElement,n=s.body;e.pageX=e.clientX+(t.scrollLeft||n.scrollLeft||0)-(t.clientLeft||0),e.pageY=e.clientY+(t.scrollTop||n.scrollTop||0)-(t.clientTop||0)}return!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),e.which||e.button===a||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}};var E=/^\s+|\s+$/g;!String.prototype.trim&&(String.prototype.trim=function(){return this.replace(E,"")}),!Array.prototype.indexOf&&(Array.prototype.indexOf=function(e,t){var n=this.length;for((t=(t=Number(t)||0)<0?Math.ceil(t):Math.floor(t))<0&&(t+=n);t<n;t++)if(this[t]===e)return t;return-1}),e=null}function w(){if(!p.dom.isReady){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(w,1)}N()}}function N(){if(!p.dom.isReady){if(!s.body)return setTimeout(N,13);if(p.dom.isReady=!0,c){for(var e=-1,t=c.length;++e<t;)c[e].call(s,p);c=null}}}function C(e,t,n){if(this.className){for(var o=" "+this.className+" ",r=-1;++r<t;)-1===o.indexOf(" "+e[r]+" ")&&(o+=e[r]+" ");this.className=o.trim()}else this.className=n}function S(e,t,n){switch(this.className){case n:this.className="";break;case"":return;default:for(var o=" "+this.className+" ",r=-1;++r<t;)o=o.replace(" "+e[r]+" "," ");this.className=o.trim()}}function A(e,t){if(""===this.style.cssText&&"string"==typeof t)this.style.cssText=t;else for(var n in e)this.style[n]!==a&&(this.style[n]=e[n])}function b(e,t,n){var o=this;t=p.event.delegate(o,e,t,n),o.attachEvent?o.attachEvent("on"+e,t):o.addEventListener&&o.addEventListener(e,t,!1)}function L(e,t){var n=this;t=p.event.getDelegate(n,e,t),n.detachEvent?n.detachEvent("on"+e,t):n.removeEventListener&&n.removeEventListener(e,t,!1)}}(window),NTESCommonNavigator.loginConfig={PATH:{WB_PATH:"http://t.163.com/service/newMessage/",DEFAULT_MAIL_PATH:"http://email.163.com#from=163nav_icon",LOG_IN_OUT_URL:"https://reg.163.com/Logout.jsp"},DOMAIN_API:{"126.com":"mail.126.com","yeah.net":"mail.yeah.net","163.com":"mail.163.com","188.com":"mail.188.com","vip.163.com":"vip.163.com","vip.126.com":"vip.126.com"},PRODUCTS:{reg:{name:"网易账号中心",url:"http://reg.163.com/Main.jsp?username=pInfo"},"163.com":{name:"我的邮箱",url:"https://mail.163.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&df=163navi"},"126.com":{name:"我的邮箱",url:"https://mail.126.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1&df=163navi"},"vip.126.com":{name:"我的邮箱",url:"http://reg.vip.126.com/enterMail.m"},"yeah.net":{name:"我的邮箱",url:"https://mail.yeah.net/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1&def=163navi"},"188.com":{name:"我的邮箱",url:"http://reg.mail.188.com/servlet/enter"},"vip.163.com":{name:"我的邮箱",url:"http://reg.vip.163.com/enterMail.m?enterVip=true-----------"},lofter:{name:"我的LOFTER",url:"http://www.lofter.com/?act=qb163rk_20141031_02"},yuehui:{name:"我的同城约会",url:"http://yuehui.163.com/"},ht:{name:"我的花田",url:"http://love.163.com?keyfrom=163site.mynavi"},note:{name:"我的云笔记",url:"http://note.youdao.com/web?entry=163.com"},easyread:{name:"网易云阅读",url:"http://yuedu.163.com/#f=topnav"},yunketang:{name:"云课堂",url:"http://study.163.com/?utm_source=163.com&utm_medium=web_ursproduct&utm_campaign=business"}},DEFAULT_PRODUCTS:["lofter","ht","yuehui","note","easyread","yunketang"],COOKIES:{huatian:"n_ht_s"},LOCALSTORAGE:{EncPassport:"NTESCommonNavigatorEncPassport"}},NTESCommonNavigator.productConfig={LOFTER:{PATH:"http://www.lofter.com/entry?act=qb163sydl_20140917_01&from=163top",POPLIST:[{url:"http://www.lofter.com/entry?act=qb163sydl_20140917_03&from=163top",name:"进入LOFTER"},{url:"http://www.lofter.com/entry?act=qb163sydl_20140917_04&from=163top&target=http://www.lofter.com/activity",name:"热门话题"},{url:"http://www.lofter.com/selections?act=qb163sydl_20140917_05",name:"专题精选"},{url:"http://www.lofter.com/entry?act=qb163sydl_20140917_06&from=163top&target=http://www.lofter.com/app",name:"下载LOFTER客户端"}]}},NTESCommonNavigator.base={each:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},extend:function(e){if(null==e)throw new Error("target cannot be null");for(var t,n,o=0,r=arguments.length;++o<r;)if(null!=(n=arguments[o]))for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},isDate:function(e){return"[object Date]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},noop:function(){},count:0},NTESCommonNavigator.cookie=function(){var r=NTESCommonNavigator.base;return{set:function(e,t,n){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);null!=n.expires&&(o+="; expires="+(r.isDate(n.expires)?n.expires:timespan.addToDate(new Date,n.expires)).toUTCString()),n.path&&(o+="; path="+n.path),n.domain&&(o+="; domain="+n.domain),!0===n.secure&&(o+="; secure"),document.cookie=o},get:function(e,t){e="; "+decodeURIComponent(e)+"=";var n="; "+document.cookie,o=n.indexOf(e);if(-1===o)return null;o+=e.length;var r=n.indexOf(";",o);return-1===r&&(r=n.length),decodeURIComponent(n.substring(o,r))},remove:function(e,t){var n="__jraiser__test__cookie__";document.cookie=n+"=1",document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT",get(n)&&set(e,"",t),(t=t||{}).expires=new Date(0),NTESCommonNavigator.cookie.set(e,"",t)}}}(),NTESCommonNavigator.utils=function(){var p=NTESCommonNavigator.base;return{encode:function(e){var t={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"};return e.replace(/[&"'<>]/g,function(e){return t[e]})},fixMsgNum:function(e){return 99<(e=parseInt(e))?e="99+":e<0&&(e=0),e},isElemHasShow:function(e){return"none"!==e[0].style.display},mousenterSupport:function(){document.createElement("div");return!1},throttle:function(e,t,n,o){var r,i,a,s=+new Date,l=0,u=0,c=null,f=function(){u=s,e.apply(i,a)};return function(){s=+new Date,i=this,a=arguments,r=s-(o?l:u)-t,clearTimeout(c),o?n?c=setTimeout(f,t):0<=r&&f():0<=r?f():n&&(c=setTimeout(f,-r)),l=s}},jsonp:function(e,t,n){"function"==typeof t&&(n=t,t={}),t||(t={});var o,r,i="NTESCommonNavigator"+(new Date).getTime(),a=t.prefix||i,s=t.name||a+p.count++,l=t.param||"callback",u=null!=t.timeout?t.timeout:6e4,c=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function m(){o.parentNode&&o.parentNode.removeChild(o),window[s]=p.noop,r&&clearTimeout(r)}return u&&(r=setTimeout(function(){m(),n&&n(new Error("Timeout"))},u)),window[s]=function(e){m(),n&&n(e)},e=(e+=(~e.indexOf("?")?"&":"?")+l+"="+c(s)).replace("?&","?"),(o=document.createElement("script")).src=e,f.parentNode.insertBefore(o,f),function d(){window[s]&&m()}},ajax:function(n){(n=n||{}).type=(n.type||"GET").toUpperCase(),n.dataType=n.dataType||"json",n.async=n.async||!0,n.timeout=n.timeout||8e3;var o,r=function a(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(n.data),i=null;(o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if("json"===n.dataType){if(4==o.readyState){window.clearTimeout(i);var e=o.status;200<=e&&e<300?n.success&&n.success(o.responseText,o.responseXML):n.fail&&n.fail(e)}}else if(4==xmlHttp.readyState&&200==xmlHttp.status){window.clearTimeout(i);var t=document.createElement("script");document.body.appendChild(t);t.src=n.url+"?"+r+"&callback=ajaxCallBack",window.ajaxCallBack=function(e){n.success(e),document.body.removeChild(t)}}},"GET"==n.type?(o.withCredentials=!0,o.open("GET",n.url+"?"+r,n.async),o.send(null)):"POST"==n.type&&(o.withCredentials=!0,o.open("POST",n.url,n.async),"undefined"==n.contentType||null==n.contentType?(o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(r)):(o.setRequestHeader("Content-Type",n.contentType),o.send(JSON.stringify(n.data)))),i=window.setTimeout(function(){window.clearTimeout(i),n.fail("ajax timeout"),o.abort()}.bind(this),n.timeout)}}}(),NTESCommonNavigator.login=function(){var f=NTESCommonNavigator.loginConfig,m=NTESCommonNavigator.utils,u=NTESCommonNavigator.base,d=NTESCommonNavigator.cookie,c=f.PRODUCTS,a=f.PATH.DEFAULT_MAIL_PATH,p=(f.PATH.LOG_IN_OUT_URL,f.DEFAULT_PRODUCTS),v=f.DOMAIN_API,g=/ipad/i.test(navigator.userAgent),s="",l="",h=NTESCommonNavigator.loginConfig.DOMAIN_API,y={userInfo:{userLogined:!1}};function _(e){for(var o=y.userInfo,t=[],n=0,r=t.length>p.length?p.length:t.length,i="",a=["reg"];n<r;n++)c[i=t[n]]&&a.push(i);1===a.length&&(a=a.concat(p)),v[o.userDomain]&&a.splice(1,0,o.userDomain);var s=[];u.each(a,function(e,t){var n=u.extend({},c[e]);n.url=n.url.replace(/pInfo/g,m.encode(o.userMail)),s.push(n)});var l="";r=s.length;u.each(s,function(e,t){l+='<li class="'+(t===r-1?"last":"")+'">      <a href="'+e.url+'" target="_blank">        <span>'+e.name+"</span>      </a>    </li>"}),document.getElementById("js_logined_suggest").innerHTML=l,e&&function(){if(g)return;_$("#js_login_suggest_wrap").show(),setTimeout(function(){_$("#js_login_suggest_wrap")[0].style.display=""},4e3)}()}return{collectLoginSuccessCallback:function(e){e&&"[object Function]"==={}.toString.call(e)&&NTESCommonNavigator.login.CALLBACKLIST.push(e)},CALLBACKLIST:[],checkLogin:function(){return y.userInfo&&y.userInfo.userLogined},getUserInfo:function(){return y.userInfo},loginUpdate:function(i){var e;(e?y.userInfo:new Promise(function(e,t){e(y.userInfo)})).then(function(e){if(e.userLogined){y.userInfo=e;for(var t=0,n=NTESCommonNavigator.login.CALLBACKLIST.length;t<n;t++){var o=NTESCommonNavigator.login.CALLBACKLIST[t];o&&"[object Function]"==={}.toString.call(o)&&o(e)}_(i),function(e){_$("#js_N_navLoginBefore").hide(),_$("#js_N_navLoginAfter").show(),_$("#js_N_navUsername")[0].innerText=e.userMail;var t=f.PATH.LOG_IN_OUT_URL+"?username="+(e.userName||e.userMail.split("@")[0])+"&url="+encodeURIComponent(location.href);document.getElementById("js_N_navLogout").addEventListener("click",function n(){try{localStorage.removeItem(f.LOCALSTORAGE.EncPassport)}catch(e){}window.open(t,"_self")})}(e);var r=e.userMail;(function(e,t,n){var o={newCount:0,totalCount:0,userName:""};e&&(s=e),t&&t,n&&(l=n);h[s];return new Promise(function(e,t){var n=h[s];e(n?{mailInfo:o,mailPath:"//msg."+n+"/cgi/mc?funcid=getusrnewmsgcnt&product=index163&template=newmsgres_setcookie.htm&username="+l}:{mailInfo:o})})})(e.userDomain,e.userName,r).then(function(e){!function n(e){var t=e.mailPath;t&&m.jsonp(t,{},function(e){var t=m.fixMsgNum(e),n=document.getElementById("js_N_navMailMsg");t?(n.style.display="block",document.getElementById("js_N_navMailMsgNum").innerHTML=t):n.style.display="none";var o=y.userInfo.userDomain,r=c[o]?c[o].url:a;r=r.replace(/&df=163navi/i,"&df=163nav_icon"),document.getElementById("js_mail_url").setAttribute("href",r)})}(e)})}})},loginSuccessCallback:function(i){var a=this,e=!1;if(i&&(e=!0),"Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<10){var t=d.get("P_INFO"),n=d.get("S_INFO"),o=d.get("NTES_PASSPORT"),r=[],s="";t&&(r=t.split("|")),r.length&&(s=r[0]||"");var l={userName:s.split("@")[0],userMail:s,userDomain:s?s.split("@")[1]:"",userIp:d.get("USERTRACK")||"",userLogined:!(!s||!n&&!o),userProduct:r[7]||""};y.userInfo=l,a.loginUpdate(i)}else{var u=function c(e){for(var t="",n=e,o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<n;r++)t+=o[Math.round(Math.random()*(o.length-1))];return t+(new Date).getTime()}(11);m.ajax({url:"https://gw.m.163.com/commons-user-main/api/v1/commons/user/pc/getUserByCookie",type:"GET",async:!0,timeout:8e3,data:{isbtn:e,trace_id:u},success:function(e,t){var n=JSON.parse(e);if(0==n.code&&1==n.data.userLogined){var o=n.data;y.userInfo={userName:o.userName,userMail:o.userMail,userDomain:o.userDomain,userLogined:!0,closeDate:o.closeDate,vipStatus:o.vipStatus,encPassport:o.encPassport},a.loginUpdate(i),o.encPassport&&a.setLocalStorage(f.LOCALSTORAGE.EncPassport,o.encPassport)}else if(0!=n.code&&(console.log(n.message),window.NTESAntAnalysis!=undefined)){var r={val_nm:"urs_error",val_act:"ursinfo_error",projectid:"NTM-LEST41Y4-58",info:{modelid:u}};window.NTESAntAnalysis.sendData(r)}if(1==i&&0==n.data.userLogined&&(console.log("登录按钮成功，但是返回结果未登录",n.message),window.NTESAntAnalysis!=undefined)){r={val_nm:"login_error",val_act:"ursinfo_error",projectid:"NTM-LEST41Y4-58",info:{modelid:u}};window.NTESAntAnalysis.sendData(r)}},fail:function(e){if(console.log("requestUserInfo请求失败，状态码为："+e),window.NTESAntAnalysis!=undefined){var t={val_nm:"userapi_fail",val_act:"ursinfo_error",projectid:"NTM-LEST41Y4-58",info:{modelid:u,userapi_errordetail:e}};window.NTESAntAnalysis.sendData(t)}}})}},setLocalStorage:function(e,t){try{window.localStorage.setItem(e,t)}catch(n){}}}}(),NTESCommonNavigator.URS=function(n){var o=NTESCommonNavigator.login;return{loadURS:function(e){var t={autoSuffix:1,needUrsBgp:1,skin:0,product:"163",promark:"MODXOXd",productKey:"5092c4b74f2a3fbfe2216e18ebe7ff8d",swidth:"190",hintTxt:"按住滑块 拖动完成拼图",version:4,newCDN:1,mode:"embed",host:"www.163.com",includeBox:e||"js_N_login_wrap",page:"login",placeholder:{account:"网易邮箱/常用邮箱",pwd:"请输入密码"},needUnLogin:1,defaultUnLogin:0,needPrepare:1,toolName:"自定义扫码App",toolUrl:"https://mail.163.com/dashi/?from=urs",notFastReg:0,single:1,cssDomain:"https://temp.163.com/special/00804C4H/",cssFiles:"urs_style_2023.css",smsBtnTxt:"登录",mbBtnTxt:"登录",needMobileLogin:1,mobileUnLoginTime:10,smsLoginFirst:1,mobileFirst:1,mbloginclause:{list:[{url:"https://reg.163.com/agreement_mobile_wap.shtml?v=20171127",txt:"《服务条款》"},{url:"https://corp.163.com/gb/legal.html",txt:"《隐私政策》"}],clauseErr:"请勾选服务协议和隐私政策"},mailloginclause:{list:[{url:"https://reg.163.com/agreement_wap.shtml?v=20171127",txt:"《服务条款》"},{url:"https://corp.163.com/gb/legal.html",txt:"《隐私政策》"}],clauseErr:"请勾选服务协议和隐私政策"},frameSize:{width:292,height:318},logincb:function(e){o.loginSuccessCallback(!0)},regcb:function(){}};new n.URS(t)}}}(window),function(o,r){var e,t,n,i,a,s,l,u,c,f,m,d,p,v=NTESCommonNavigator.utils,g=NTESCommonNavigator.URS,h=!1,y=!1,_=250,T=null,E=!1,w=!1,N="",C="ntes-nav-select-unfold",S=/ipad/i.test(navigator.userAgent.toLowerCase());function A(){T&&(clearTimeout(T),T=null)}function b(){E||(g.loadURS(),E=!0),setTimeout(function(){l.show(),h=!0,a.addClass("ntes-nav-login-active").removeClass("ntes-nav-login-normal"),l.addClass("ue-animation")})}function L(){l.hide(),h=!1,a.addClass("ntes-nav-login-normal").removeClass("ntes-nav-login-active"),l.removeClass("ue-animation"),N&&l.removeClass(N)}function I(){c.hasClass("ntes-nav-quick-navigation-active")&&(c.removeClass("ntes-nav-quick-navigation-active"),f.hide())}function x(){return v.isElemHasShow(l)?L():b(),!1}function P(){A(),b()}function O(){A(),function t(e){T=setTimeout(function(){e&&e()},_)}(function(){L()})}function R(){A()}function j(e){!function r(e){if(h){for(var t=e.target||e.srcElement,n=l[0],o=s[0];t;){if(t==n||t==o)return;t=t.parentNode}L()}}(e),function i(e){if(y){for(var t=e.target||e.srcElement,n=c[0],o=f[0];t;){if(t==n||t==o)return;t=t.parentNode}I()}}(e)}function k(e){0<r.body.scrollTop+r.documentElement.scrollTop?w||(a.addClass("ntes-nav-login-scroll"),u.addClass("ntes-nav-logined-scroll"),w=!0):w&&(a.removeClass("ntes-nav-login-scroll"),u.removeClass("ntes-nav-logined-scroll"),w=!1),h&&L(),y&&I()}var D="ntes-nav-wrap-resize1024";function M(){(function n(){var e=0,t=0;return r.documentElement&&r.documentElement.clientHeight?(e=r.documentElement.clientWidth,t=r.documentElement.clientHeight):r.body&&r.body.clientHeight?(e=r.body.clientWidth,t=r.body.clientHeight):o.innerHeight&&(e=o.innerWidth,t=o.innerHeight),{w:e,h:t}})().w<1200?i.addClass(D):i.removeClass(D)}function U(){c.hasClass("ntes-nav-quick-navigation-active")?(c.removeClass("ntes-nav-quick-navigation-active").addClass("ntes-nav-quick-navigation-unactive"),y=!1,f.hide()):(c.removeClass("ntes-nav-quick-navigation-unactive").addClass("ntes-nav-quick-navigation-active"),y=!0,f.show())}function F(e){for(;e;){if(_$(e).hasClass("ntes-nav-select"))return e;e=e.parentNode}}function B(e){_$(e).removeClass(C),p&&_$(p).removeClass(C)}function $(e){p&&_$(p).removeClass(C),_$(e).addClass(C),p=e}function H(e){if(!S){var t=F((e||event).target);_$(t).hasClass(C)?_$(t).removeClass(C):_$(t).addClass(C),B(t)}}function q(e){if(!S){var t=F((e||event).target);clearTimeout(d),d=d&&p===t?undefined:setTimeout(function(){t.focus(),$(t),d=undefined},250)}}function G(e){if(!S){var t=F((e||event).target);clearTimeout(d),d=d&&p===t?undefined:setTimeout(function(){t.blur(),B(t),d=undefined},100)}}_$((e=v.mousenterSupport(),t=e?"mouseenter":"mouseover",n=e?"mouseleave":"mouseout",i=_$(".ntes_nav_wrap"),a=_$("#js_N_navHighlight"),u=_$("#js_N_logined_warp"),s=_$("#js_N_nav_login_title"),l=_$("#js_N_login_wrap"),h=v.isElemHasShow(l),s.addEvent("click",x),s.addEvent(t,P),s.addEvent(n,O),l.addEvent(t,R),c=_$(".ntes-nav-quick-navigation-btn"),f=_$(".ntes-quicknav-pop"),c.addEvent("click",U),c.addClass("ntes-nav-quick-navigation-init"),M(),_$(r.body).addEvent("click",j),_$(o).addEvent("scroll",v.throttle(k,300,!0,!1)),_$(o).addEvent("resize",v.throttle(M,50,!0,!1)),(m=_$(".js_N_navSelect")).addEvent(t,q),m.addEvent(n,G),void m.addEvent("click",H))),NTESCommonNavigator.event={showPop:b}}(window,document),function(){var e={platform:""};({detect:function(){if(-1<navigator.platform.indexOf("Win"))e.platform="ua-win";else if(-1<navigator.platform.indexOf("Mac"))e.platform="ua-mac";else{if(!(-1<navigator.platform.indexOf("iPad")||-1<navigator.platform.indexOf("iPhone")))return!1;e.platform="ua-ios"}},init:function(){(this.detect(),e.platform)&&(document.getElementsByTagName("html")[0].className+=" "+e.platform)}}).init();NTESCommonNavigator.utils,NTESCommonNavigator.cookie;var t=NTESCommonNavigator.login;_$.ready(function(){setTimeout(function(){t.loginSuccessCallback(!1)},100)})}();